---
title: "A sequence translator folder using POE::Component::DirWatch::Object"
layout: "post"
permalink: "/2009/05/so-i-admit-it.html"
uuid: "369825917688751860"
guid: "tag:blogger.com,1999:blog-903262963771971357.post-369825917688751860"
date: "2009-05-18 16:02:00"
updated: "2009-05-18 19:55:57"
description:
categories: [bioperl, POE, perl, translate, DirWatch]
---

<div class="css-full-post-content js-full-post-content">
So, I admit it. I hate coding GUIs. Probably because I don't have much experience doing it, but I hate it nevertheless. So when I bumped into <a href="http://search.cpan.org/%7Egroditi/POE-Component-DirWatch-Object-0.10/lib/POE/Component/DirWatch/Object.pm">POE::Component::DirWatch::Object</a> and grasped some of the potential it had for <span style="font-style: italic;">kind of</span> replacing a GUI in some <span style="font-style: italic;">simple</span> scripts, I just had to try it.<br /><br />What <a href="http://search.cpan.org/%7Egroditi/POE-Component-DirWatch-Object-0.10/lib/POE/Component/DirWatch/Object.pm">POE::Component::DirWatch::Object</a> basically does is keep an eye on a folder, and act upon an event regarding it. For instance, using <a href="http://search.cpan.org/%7Egroditi/POE-Component-DirWatch-Object-0.10/lib/POE/Component/DirWatch/Object/NewFile.pm">::NewFile</a>, it will trigger a user-defined function whenever a file is created in that directory. This might seem old news for the compsci people, but for me it was quite a new concept and I really liked it.<br /><br />So to test-drive it, I decided that I'd code for a simple script (not too different than the module's synopsis, in retrospect) that would translate any DNA sequence that was created in it. This way, the user would just have to copy or move her desired sequence files to the "translate" (as I very imaginatively called it) folder, and they would automagically translate themselves.<br /><br />The core of the script is:<br /><br /><script src="http://gist.github.com/113591.js"></script><br />Simple, right? Here, <span style="font-family:courier new;">$watcher</span> will execute the <span style="font-family:courier new;">translate</span> subroutine whenever a new file is created in the <span style="font-family:courier new;">/home/brunov/translate</span> folder. The last line is needed to make POE do its magic. The script runs a daemon that never exits, and could be configured to start when you log in to your session.<br /><br />The translate routine is pretty straightforward. It uses <a href="http://search.cpan.org/%7Ecjfields/BioPerl-1.6.0/Bio/Seq.pm">Bio::Seq</a> for the translation part, and <a href="http://search.cpan.org/%7Ecjfields/BioPerl-1.6.0/Bio/SeqIO.pm">Bio::SeqIO</a> for the file reading and writing. What it does is read the input file, translate all the translatable sequences that are in it, and write the results in a temporary file,<br />which is later used to replace the original one.<br /><br /><script src="http://gist.github.com/113587.js"></script><br />That's all that is needed (minus a little error checking that I chose to leave out for the sake of bloggability).<br /><br /><span style="font-size:130%;">Adding neat notifications</span><br /><br />The script runs fine as it is, but it's kind of dull. Since there are no newly created files nor visible output, you are tempted to reopen the translated file to actually check that your DNA has been translated into protein. This is why I thought that adding system notifications would be appropiate.<br /><br />Actually, bullshit. I just can't get enough of Ubuntu's<a href="http://www.markshuttleworth.com/archives/265"> sexy notification system</a>, so I figured it'd be nice if a bubble popped up saying the outcome of the translation.<br /><br />So doing some more CPAN digging, I found <a href="http://search.cpan.org/%7Eflora/Gtk2-Notify-0.05/lib/Gtk2/Notify.pm">Gtk2::Notify</a>. With a few extra lines of code, I got a chatty, ribosomy (get it?) folder. Here's the modified <span style="font-family:courier new;">translate</span> sub (minus old comments) and the new <span style="font-family:courier new;">notify</span> one:<br /><br /><script src="http://gist.github.com/113590.js"></script><br />And that's it! Now whenever you drop a file in the "translate" folder, all DNA sequences that are in it get translated (and those who are not are left untouched). This could allow for cute chained actions; one could have a whole hierarchy of live folders with things such as "reverse translate", "blast it", "predict solubility", "digest it" and so on. It is certainly not as flexible as good old CLI scripts, but it reaches a nice compromise between the user friendliness of a GUI and the batch processing capabilities of command-line fu.<br /><br />Here's how it looks:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_dJsDskOH5ac/ShGG8NZOldI/AAAAAAAAAAw/kVANteA6t4E/s1600-h/screenshot_w_arrow.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 320px;" src="http://2.bp.blogspot.com/_dJsDskOH5ac/ShGG8NZOldI/AAAAAAAAAAw/kVANteA6t4E/s400/screenshot_w_arrow.png" alt="" id="BLOGGER_PHOTO_ID_5337195402356495826" border="0" /></a><br /><br />You can see the real-life script <a href="http://gist.github.com/113594">here</a>.<br /><br />P.S: And just <a href="http://use.perl.org/~Alias/journal/38991?from=rss">to spite TIOBE people</a>: Perl Programming rocks! And also <a href="http://www.rapideuphoria.com/">Euphoria Programming</a> and <a href="http://www.audiosynth.com/">SuperCollider Programming</a>, of course.
</div>
